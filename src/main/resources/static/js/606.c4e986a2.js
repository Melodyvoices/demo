"use strict";(self["webpackChunkaimailbos_frontend"]=self["webpackChunkaimailbos_frontend"]||[]).push([[606],{2202:function(e,t,a){a.d(t,{A:function(){return g}});var l=a(6768),i=a(4232),n=a.p+"img/cardTitle.a3119a7a.png";const s={class:"cardIndex"},o={class:"card-title-box"},r={class:"card-title"},u={class:"content"};function c(e,t,a,c,d,p){return(0,l.uX)(),(0,l.CE)("div",s,[(0,l.Lk)("div",o,[t[0]||(t[0]=(0,l.Lk)("img",{src:n,class:"cardTitle-img"},null,-1)),t[1]||(t[1]=(0,l.Lk)("div",{class:"title-icon"},null,-1)),(0,l.Lk)("div",r,(0,i.v_)(a.title),1)]),(0,l.Lk)("div",u,[(0,l.RG)(e.$slots,"default",{},void 0,!0)])])}var d={name:"cardIndex",props:{title:{type:String,required:!0}}},p=a(1241);const h=(0,p.A)(d,[["render",c],["__scopeId","data-v-0dc6b654"]]);var g=h},2022:function(e,t,a){a.r(t),a.d(t,{default:function(){return he}});var l=a(6768),i=a(4232),n=a.p+"img/upload_background.d6aa7de5.svg";const s={class:"mailIndex"},o={style:{display:"flex","flex-direction":"column",height:"100%",gap:"1vw"}},r={class:"query-group"},u={class:"upload-icon flex-center"},c={style:{display:"flex","flex-direction":"column",height:"100%",gap:"1vw"}},d={class:"query-group",style:{width:"37%"}},p={class:"flex-coloum",style:{width:"100%",height:"100%",padding:"1vw 0"}},h={class:"upload-dragPart",style:{display:"flex"}},g={style:{flex:"2"},class:"upload-svg"},m={class:"renderFile-template"},y={class:"flex-1 flex-center"},v=["src"],b={key:1,class:"unknow-box"},k={class:"template-name"},f={key:0,class:"loading-icon"},C={key:1,class:"success-status"},L={key:2,class:"fail-status"},x={class:"delete-icon"},F={key:0,style:{display:"flex","flex-direction":"row-reverse","margin-top":"10px",color:"white",padding:"0 1vw"}},O={class:"modal-btn"};function S(e,t,S,w,_,D){const I=(0,l.g2)("InputSearch"),U=(0,l.g2)("Select"),V=(0,l.g2)("CloudUploadOutlined"),Q=(0,l.g2)("Table"),X=(0,l.g2)("a-tab-pane"),E=(0,l.g2)("a-tabs"),j=(0,l.g2)("FileUnknownOutlined"),B=(0,l.g2)("LoadingOutlined"),M=(0,l.g2)("DeleteOutlined"),A=(0,l.g2)("a-upload-dragger"),z=(0,l.g2)("a-button"),T=(0,l.g2)("a-spin"),q=(0,l.g2)("Card"),K=(0,l.g2)("a-modal");return(0,l.uX)(),(0,l.CE)("div",s,[(0,l.bF)(E,{activeKey:_.activeKey,"onUpdate:activeKey":t[0]||(t[0]=e=>_.activeKey=e),onChange:D.changeTabs},{default:(0,l.k6)((()=>[(0,l.bF)(X,{key:"mail",tab:"邮件列表"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",o,[(0,l.Lk)("div",r,[(0,l.bF)(I,{placeholder:"请输入邮件标题",inputValue:_.mailQueryForm.title,onSearch:D.getMailList},null,8,["inputValue","onSearch"]),(0,l.bF)(I,{placeholder:"请输入发件人",inputValue:_.mailQueryForm.senders,onSearch:D.getMailList},null,8,["inputValue","onSearch"]),(0,l.bF)(I,{placeholder:"请输入收件人",inputValue:_.mailQueryForm.recipients,onSearch:D.getMailList},null,8,["inputValue","onSearch"]),(0,l.bF)(U,{options:_.mailTypeOptions,selectValue:_.mailQueryForm.type,placeholder:"全部类型",onChange:D.getMailList},null,8,["options","selectValue","onChange"]),(0,l.bF)(U,{options:_.mailStatusOptions,selectValue:_.mailQueryForm.status,placeholder:"全部状态",onChange:D.getMailList},null,8,["options","selectValue","onChange"]),(0,l.Lk)("div",u,[(0,l.bF)(V,{onClick:D.openUpload},null,8,["onClick"])])]),(0,l.bF)(Q,{dataSource:_.mailDataSource,columns:_.mailcolumns,actions:[{name:"check",label:"查看"}],onHandleCheck:D.handleCheckMail,pagination:_.pagination_mail,onChange:D.mailTableChange},null,8,["dataSource","columns","onHandleCheck","pagination","onChange"])])])),_:1}),(0,l.bF)(X,{key:"user",tab:"用户列表","force-render":""},{default:(0,l.k6)((()=>[(0,l.Lk)("div",c,[(0,l.Lk)("div",d,[(0,l.bF)(I,{placeholder:"请输入用户名",inputValue:_.userQueryForm.name,onSearch:D.getUserList},null,8,["inputValue","onSearch"]),(0,l.bF)(U,{options:_.userTypeOptions,selectValue:_.userQueryForm.type,placeholder:"全部类型",onChange:D.getUserList},null,8,["options","selectValue","onChange"])]),(0,l.bF)(Q,{dataSource:_.userDataSource,columns:_.usercolumns,actions:[{name:"check",label:"查看"}],onHandleCheck:D.handleCheckUser,pagination:_.pagination_user,onChange:D.userTableChange},null,8,["dataSource","columns","onHandleCheck","pagination","onChange"])])])),_:1})])),_:1},8,["activeKey","onChange"]),(0,l.bF)(K,{open:_.uploadOpen,"onUpdate:open":t[2]||(t[2]=e=>_.uploadOpen=e),onOk:e.handleCreateOk,footer:null},{default:(0,l.k6)((()=>[(0,l.bF)(q,{title:"上传测试邮件",style:{position:"relative"}},{default:(0,l.k6)((()=>[t[6]||(t[6]=(0,l.Lk)("img",{src:n,style:{position:"absolute",width:"100%",height:"100%",top:"0vw","-webkit-user-drag":"none","z-index":"-1"}},null,-1)),(0,l.Lk)("div",p,[(0,l.bF)(T,{spinning:_.spinning,tip:"邮件处理中，请稍后...",style:{width:"100%"}},{default:(0,l.k6)((()=>[(0,l.bF)(A,{fileList:_.fileList,"onUpdate:fileList":t[1]||(t[1]=e=>_.fileList=e),name:"file",action:"/api/upload/uploadFile",onChange:D.handleUpload,"before-upload":D.beforeUpload,class:"docUpload",multiple:!0},{itemRender:(0,l.k6)((({file:e})=>[(0,l.Lk)("div",m,[(0,l.Lk)("div",y,[e.name.endsWith(".eml")?((0,l.uX)(),(0,l.CE)("img",{key:0,class:"img",src:a(5586)},null,8,v)):((0,l.uX)(),(0,l.CE)("div",b,[(0,l.bF)(j)]))]),(0,l.Lk)("div",k,(0,i.v_)(e.name),1),"uploading"===e.status?((0,l.uX)(),(0,l.CE)("div",f,[(0,l.bF)(B)])):"done"===e.status?((0,l.uX)(),(0,l.CE)("div",C,"上传成功")):((0,l.uX)(),(0,l.CE)("div",L,"上传失败")),(0,l.Lk)("div",x,[(0,l.bF)(M,{onClick:t=>D.deleteFile(e)},null,8,["onClick"])])])])),default:(0,l.k6)((()=>[(0,l.Lk)("div",h,[(0,l.Lk)("div",g,[(0,l.bF)(V)]),t[3]||(t[3]=(0,l.Lk)("div",{style:{flex:"5"},class:"upload-text"},[(0,l.Lk)("div",{class:"upload-title"},[(0,l.eW)("拖拽文件，或者点击 "),(0,l.Lk)("span",{class:"upload-strong"},"选择文件"),(0,l.eW)(" 上传")]),(0,l.Lk)("div",{class:"upload-subtitle"},"支持格式：pdf、doc、docx、msg"),(0,l.Lk)("div",{class:"upload-subtitle"},"单个文件大小限制10G以内")],-1))])])),_:1},8,["fileList","onChange","before-upload"]),_.fileList.length>0?((0,l.uX)(),(0,l.CE)("div",F,"上传文档数："+(0,i.v_)(_.createDataByListForm.length)+"/"+(0,i.v_)(_.fileList.length),1)):(0,l.Q3)("",!0),(0,l.Lk)("div",O,[(0,l.bF)(z,{type:"primary",danger:"",style:{position:"relative",right:"1vw"},onClick:D.handleCancel},{default:(0,l.k6)((()=>t[4]||(t[4]=[(0,l.eW)("取消")]))),_:1},8,["onClick"]),(0,l.bF)(z,{type:"primary",style:{position:"relative",right:"1vw"},disabled:0===_.createDataByListForm.length,onClick:D.handleUploadOk},{default:(0,l.k6)((()=>t[5]||(t[5]=[(0,l.eW)("完成")]))),_:1},8,["disabled","onClick"])])])),_:1},8,["spinning"])])])),_:1})])),_:1},8,["open","onOk"])])}a(4114);function w(e,t,a,i,n,s){const o=(0,l.g2)("a-input-search");return(0,l.uX)(),(0,l.Wv)(o,{value:n.value,"onUpdate:value":t[0]||(t[0]=e=>n.value=e),placeholder:a.placeholder,"enter-button":"",style:{width:"100%"}},null,8,["value","placeholder"])}var _={name:"inputSearch",props:{inputValue:{type:String,required:!0},placeholder:{type:String,required:!1}},data(){return{value:this.inputValue}},watch:{inputValue(e){this.value=e},value(e){this.$emit("update:inputValue",e)}}},D=a(1241);const I=(0,D.A)(_,[["render",w],["__scopeId","data-v-ab5f8ad6"]]);var U=I;function V(e,t,a,i,n,s){const o=(0,l.g2)("a-select");return(0,l.uX)(),(0,l.Wv)(o,{value:n.value,"onUpdate:value":t[0]||(t[0]=e=>n.value=e),style:{width:"100%"},onChange:e.handleChange,options:a.options,allowClear:!0,placeholder:a.placeholder},null,8,["value","onChange","options","placeholder"])}var Q={name:"selectIndex",props:{selectValue:{type:String,required:!0},options:{type:Object,required:!0},placeholder:{type:String,required:!1}},data(){return{value:this.selectValue}},watch:{selectValue(e){this.value=e},value(e){this.$emit("update:selectValue",e)}}};const X=(0,D.A)(Q,[["render",V],["__scopeId","data-v-32111c67"]]);var E=X;const j={class:"tableIndex"},B={key:0},M={key:1},A={key:0,style:{color:"rgba(55,179,101,1)"}},z={key:1,style:{color:"rgba(242,65,95,1)"}},T={key:2,style:{color:"#f6a800"}},q={key:3,style:{color:"#5ec3ff"}};function K(e,t,a,n,s,o){const r=(0,l.g2)("a-button"),u=(0,l.g2)("a-table");return(0,l.uX)(),(0,l.CE)("div",j,[(0,l.bF)(u,{dataSource:s.data,columns:a.columns,style:{width:"100%"},pagination:a.pagination,onChange:o.paginationChange},{bodyCell:(0,l.k6)((({column:e,record:t})=>["type"===e.key?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[0===t.type?((0,l.uX)(),(0,l.CE)("div",B,"正常邮件")):(0,l.Q3)("",!0),1===t.type?((0,l.uX)(),(0,l.CE)("div",M,"恶意邮件")):(0,l.Q3)("",!0)],64)):(0,l.Q3)("",!0),"status"===e.key?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[0===t.status?((0,l.uX)(),(0,l.CE)("div",A,"放行")):(0,l.Q3)("",!0),1===t.status?((0,l.uX)(),(0,l.CE)("div",z,"拦截")):(0,l.Q3)("",!0),2===t.status?((0,l.uX)(),(0,l.CE)("div",T,"检测中")):(0,l.Q3)("",!0),3===t.status?((0,l.uX)(),(0,l.CE)("div",q,"模型解析失败")):(0,l.Q3)("",!0)],64)):(0,l.Q3)("",!0),"action"===e.key?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:2},(0,l.pI)(a.actions,((e,a)=>((0,l.uX)(),(0,l.Wv)(r,{key:a,type:"primary",onClick:a=>o.handleAction(e.name,t.id)},{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.label),1)])),_:2},1032,["onClick"])))),128)):(0,l.Q3)("",!0)])),_:1},8,["dataSource","columns","pagination","onChange"])])}var P={name:"tableIndex",props:{columns:{type:Object,required:!0},dataSource:{type:Object,required:!0},actions:{type:Object,required:!1},pagination:{type:Object,required:!1}},data(){return{data:this.dataSource}},methods:{handleAction(e,t){this.$emit(`handle-${e}`,t)},paginationChange(e){this.$emit("change",e)}},watch:{dataSource(e){this.data=e},data(e){this.$emit("update:dataSource",e)}}};const H=(0,D.A)(P,[["render",K],["__scopeId","data-v-5d1b25ac"]]);var W=H,$=a(2202),N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},G=N,R=a(4827);function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},l=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),l.forEach((function(t){Y(e,t,a[t])}))}return e}function Y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Z=function(e,t){var a=J({},e,t.attrs);return(0,l.bF)(R.A,J({},a,{icon:G}),null)};Z.displayName="CloudUploadOutlined",Z.inheritAttrs=!1;var ee=Z,te=a(2281),ae=a(6678),le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.7L639.4 73.4c-6-6-14.2-9.4-22.7-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.6-9.4-22.6zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM402 549c0 5.4 4.4 9.5 9.8 9.5h32.4c5.4 0 9.8-4.2 9.8-9.4 0-28.2 25.8-51.6 58-51.6s58 23.4 58 51.5c0 25.3-21 47.2-49.3 50.9-19.3 2.8-34.5 20.3-34.7 40.1v32c0 5.5 4.5 10 10 10h32c5.5 0 10-4.5 10-10v-12.2c0-6 4-11.5 9.7-13.3 44.6-14.4 75-54 74.3-98.9-.8-55.5-49.2-100.8-108.5-101.6-61.4-.7-111.5 45.6-111.5 103zm78 195a32 32 0 1064 0 32 32 0 10-64 0z"}}]},name:"file-unknown",theme:"outlined"},ie=le;function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},l=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),l.forEach((function(t){se(e,t,a[t])}))}return e}function se(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var oe=function(e,t){var a=ne({},e,t.attrs);return(0,l.bF)(R.A,ne({},a,{icon:ie}),null)};oe.displayName="FileUnknownOutlined",oe.inheritAttrs=!1;var re=oe,ue=a(8696),ce=a(7694),de={name:"mailIndex",components:{CloudUploadOutlined:ee,DeleteOutlined:te.A,LoadingOutlined:ae.A,FileUnknownOutlined:re,InputSearch:U,Select:E,Table:W,Card:$.A},data(){return{spinning:!1,activeKey:"mail",uploadOpen:!1,fileList:[],createDataByListForm:[],mailQueryForm:{pageNum:1,title:"",senders:"",recipients:"",type:void 0,status:void 0},mailDataSource:[],mailcolumns:[{title:"ID",dataIndex:"id",key:"id"},{title:"邮件标题",dataIndex:"title",key:"title"},{title:"发件人",dataIndex:"senders",key:"senders"},{title:"收件人",dataIndex:"recipients",key:"recipients"},{title:"类型",dataIndex:"type",key:"type"},{title:"状态",dataIndex:"status",key:"status"},{title:"发送日期",dataIndex:"sendDate",key:"sendDate"},{title:"操作",key:"action"}],mailTypeOptions:[{value:0,label:"正常邮件"},{value:1,label:"恶意邮件"}],mailStatusOptions:[{value:0,label:"放行"},{value:1,label:"拦截"},{value:2,label:"检测中"},{value:3,label:"模型解析失败"}],userQueryForm:{name:"",type:void 0},userDataSource:[{id:"1",mailBox:"xxx@139.com",type:"通知",sendDate:"2024-09-10 08:30:00"},{id:"2",mailBox:"xxx@139.com",type:"工作",sendDate:"2024-09-09 17:45:00"},{id:"3",mailBox:"xxx@139.com",type:"营销",sendDate:"2024-09-08 10:15:00"},{id:"4",mailBox:"xxx@139.com",type:"通知",sendDate:"2024-09-07 09:00:00"},{id:"5",mailBox:"xxx@139.com",type:"通知",sendDate:"2024-09-06 14:20:00"}],usercolumns:[{title:"ID",dataIndex:"id",key:"id"},{title:"用户邮箱",dataIndex:"mailBox",key:"mailBox"},{title:"类型",dataIndex:"type",key:"type"},{title:"最近活跃",dataIndex:"sendDate",key:"sendDate"},{title:"操作",key:"action"}],userTypeOptions:[{value:"jack",label:"Jack"},{value:"lucy",label:"Lucy"}],pagination_mail:{current:1,total:5,defaultPageSize:10,showSizeChanger:!1},pagination_user:{current:1,total:5,defaultPageSize:10,showSizeChanger:!1}}},mounted(){this.getMailList()},methods:{getMailList(){this.mailQueryForm.pageNum=this.pagination_mail.current,(0,ue._w)(this.mailQueryForm).then((e=>{this.mailDataSource=e.contentData,this.pagination_mail.total=e.totalSize}))},getUserList(){this.userQueryForm.pageNum=this.pagination_user.current},mailTableChange(e){this.pagination_mail.current=e.current,this.getMailList()},userTableChange(e){this.pagination_user.current=e.current,this.getUserList()},changeTabs(e){this.activeKey=e,"mail"===this.activeKey?this.getMailList():"user"===this.activeKey&&this.getUserList()},handleCheckMail(e){this.$router.push("/mail/mailDetail/"+e)},handleCheckUser(e){this.$router.push("/mail/userDetail/"+e)},openUpload(){this.uploadOpen=!0},handleCancel(){this.uploadOpen=!1,this.createDataByListForm=[],this.fileList=[]},handleUpload(e){e.file.status,"done"===e.file.status?this.createDataByListForm.push({filePath:e.file.response.result.path,fileName:e.file.response.result.originalName}):"error"===e.file.status&&console.log(e.file.name+"上传失败")},beforeUpload(e){const t=["message/rfc822"],a=10737418240;return t.includes(e.type)||e.name.endsWith(".eml")?!(e.size>a)||(ce.Ay.warning("文件大小不能超过10GB!"),!1):(ce.Ay.warning("只能上传 eml 文件!"),!1)},handleUploadOk(){this.spinning=!0,(0,ue.bn)(this.createDataByListForm).then((e=>{e.errorMsg&&ce.Ay.warning(e.errorMsg),this.createDataByListForm=[],this.fileList=[]})).catch((e=>{console.log(e)})).finally((()=>{this.uploadOpen=!1,this.spinning=!1,this.getMailList()}))},deleteFile(e){this.fileList=this.fileList.filter((t=>t.uid!==e.uid)),this.createDataByListForm=this.createDataByListForm.filter((t=>t.name!==e.name))}}};const pe=(0,D.A)(de,[["render",S],["__scopeId","data-v-1c275f97"]]);var he=pe},5586:function(e,t,a){e.exports=a.p+"img/139mail.2390e11c.jpg"}}]);
//# sourceMappingURL=606.c4e986a2.js.map